---
import { config } from "../utils/config.ts";
import Sidebar from "../components/Sidebar.astro";
const { title, description } = Astro.props;
---

<!doctype html>
<html lang="zh-CN">
  <head>
    <meta name="description" content={description || config.site.description} />
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
    />
    <meta name="keywords" content={config.site.keywords.join(", ")} />
    <title>{title} · {config.site.name} · {config.site.description}</title>
    <!-- 移除Font Awesome CDN链接 -->
    <script is:inline>
      import { library, dom } from '@fortawesome/fontawesome-svg-core';
      import { faGithub, faWeibo, faWeixin } from '@fortawesome/free-brands-svg-icons';
    
      // 添加需要使用的图标到库中
      library.add(faGithub, faWeibo, faWeixin);
      dom.watch();
    </script>
    <link rel="icon" href="/img/favicon.svg">
  </head>
  <body
    class="flex min-h-screen bg-white text-apple-dark font-sans antialiased"
  >
    <!-- 移动端遮罩层 -->
    <div
      id="mobileMenuOverlay"
      class="mobile-menu-overlay fixed inset-0 bg-black/50 z-30 lg:hidden"
    >
    </div>
    <!-- 移动端菜单按钮 -->
    <div
      id="mobileHeader"
      class="lg:hidden fixed top-[env(safe-area-inset-top)] left-0 right-0 bg-white border-b border-gray-100 z-50 px-4 py-3 flex items-center justify-between"
    >
      <button
        id="mobileMenuBtn"
        class="p-2 rounded-md hover:bg-gray-100 transition-colors"
      >
        <svg
          class="w-6 h-6"
          fill="none"
          stroke="currentColor"
          viewBox="0 0 24 24"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M4 6h16M4 12h16M4 18h16"></path>
        </svg>
      </button>
      <a href="/" class="text-lg font-medium">{config.site.name}</a>
      <div class="w-6"></div>
      <!-- 占位元素，保持居中 -->
    </div>

    <!-- 左侧导航栏 -->
    <Sidebar />

    <!-- 移动端内容间隔器 -->
    <div id="mobileSpacer" class="lg:hidden"></div>

    <!-- 主内容区域 -->
    <main class="flex-1 pt-6 pb-16 transition-all duration-300 lg:ml-64">
      <div class="container mx-auto px-6">
        <slot />
      </div>
    </main>
  </body>
</html>

<style is:global>
  /* 基础样式 */
  :root {
    --font-sans: "Inter", system-ui, sans-serif;
    --color-primary: #3b82f6;
    --color-secondary: #64748b;
    --color-background: #f8fafc;
    --color-card: #ffffff;
    --color-border: #e2e8f0;
    --safe-area-inset-top: env(safe-area-inset-top);
  }

  /* 移动端菜单样式 */
  @media (max-width: 1023px) {
    .mobile-menu-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: rgba(0, 0, 0, 0.5);
      z-index: 30;
      display: none;
    }

    .mobile-menu-overlay.active {
      display: block;
    }

    #sidebar {
      z-index: 40;
    }

    body {
      flex-direction: column;
    }
    main {
      margin-left: 0 !important;
      padding-top: 0;
    }
  }

  /* 苹果风格滚动条 */
  /* 苹果风格滚动条 */
  ::-webkit-scrollbar {
    width: 8px;
    height: 8px;
  }

  ::-webkit-scrollbar-track {
    background: transparent;
  }

  ::-webkit-scrollbar-thumb {
    background-color: rgba(0, 0, 0, 0.2);
    border-radius: 4px;
  }

  ::-webkit-scrollbar-thumb:hover {
    background-color: rgba(0, 0, 0, 0.3);
  }

  @font-face {
    font-family: ANWT;
    src: url("/fonts/anwt.woff2") format("woff2-variations");
    font-weight: 300 900;
    font-style: normal;
    font-display: fallback;
  }

  .ep-id {
    font-family: ANWT;
    font-feature-settings: "tnum";
  }

  .ep-id:before {
    content: ‘№’;
  }

  :global(.container) {
    max-width: 800px;
    margin: 0 auto;
    padding: 2rem 0;
  }
</style>
